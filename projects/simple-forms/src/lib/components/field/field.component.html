<mat-form-field [appearance]="field?.appearance ? field?.appearance : 'outline'" [style.width]="field?.width ? field?.width : '100%'">
  <mat-label *ngIf="field?.label">{{ field?.label }}</mat-label>

  <ng-container *ngIf="!field?.type || field?.type === 'input'">
    <input matInput [placeholder]="field?.placeholder" [type]="field?.typeInput?.type ? field?.typeInput?.type : 'text'" [required]="required" (change)="setValue($event?.target?.value)" (keypress)="setValue($event?.target?.value)" [formControl]="internalControl">
  </ng-container>
  
  <ng-container *ngIf="field?.type === 'select'">
    <mat-select [placeholder]="field?.placeholder" [multiple]="field?.typeSelect?.multiple" [required]="required" (selectionChange)="setValue($event?.value)" [formControl]="internalControl">
      <mat-option *ngFor="let option of field?.typeSelect?.options" [value]="option.value">{{ option.description }}</mat-option>
    </mat-select>
  </ng-container>
  
  <ng-container *ngIf="field?.type === 'date'">
    <input matInput #date_input [matDatepicker]="date_picker" (focus)="date_picker.open()" [placeholder]="field?.placeholder" [required]="required" (dateChange)="setValue($event?.target?.value)" (keypress)="setValue($event?.target?.value)" [formControl]="internalControl">
    <mat-datepicker-toggle matSuffix [for]="date_picker" class="mat-datepicker-toggle-suffix"></mat-datepicker-toggle>
    <mat-datepicker #date_picker (closed)="date_input.blur()"></mat-datepicker>
  </ng-container>

  <ng-container *ngIf="field?.type === 'file'">
    <ngx-mat-file-input (change)="setValue(field?.typeFile?.multiple ? $event?.srcElement?.files : $event?.srcElement?.files[0])" [placeholder]="field?.placeholder" [accept]="field?.typeFile?.accept" [multiple]="field?.typeFile?.multiple" [autofilled]="field?.typeFile?.autofilled" [required]="required" [formControl]="internalControl"></ngx-mat-file-input>
  </ng-container>

  <mat-error *ngIf="control?.errors?.required && !field?.validatorMessages?.required">{{ field?.requiredMessage ? field?.requiredMessage : 'Este campo es obligatorio!' }}</mat-error>

  <ng-container *ngFor="let message of field?.validatorMessages | keyvalue: originalOrder" ngProjectAs="mat-error">
    <mat-error *ngIf="control?.errors && control?.errors[message.key]">{{ message.value }}</mat-error>
  </ng-container>
</mat-form-field>
